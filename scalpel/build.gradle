plugins {
    id 'java'

    // Bundle JEP in .jar
    id 'com.github.johnrengelman.shadow' version '7.1.2'
}

group 'lexfo'
version '1.0.0'

repositories {
    mavenLocal()
    mavenCentral()
}

def venvPath = '../.venv'
def jepPath = venvPath + '/lib/python3.10/site-packages/jep'

dependencies {
    compileOnly 'net.portswigger.burp.extensions:montoya-api:2023.1'

    // JEP installed from pip in a venv.
    implementation files(jepPath + '/jep-4.1.1.jar')

    implementation 'commons-io:commons-io:2.6'
}

jar {
    from {
        configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) }
    }
    
}

sourceSets {
    main {
        resources {
            srcDirs venvPath
        }
    }
}

tasks.withType(Copy).all { duplicatesStrategy 'exclude' }
